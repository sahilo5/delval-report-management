{% comment %}
Reusable Form Input Component
Usage:
{% include "components/form_input.html" with field=form.username label="Username" type="text" placeholder="Enter username" %}

Parameters:
- field: Django form field (required)
- label: Input label text (optional, will use field label if not provided)
- type: Input type (optional, will use field type if not provided)
- placeholder: Placeholder text (optional)
- required: Boolean to show required indicator (optional)
- help_text: Help text to display below input (optional)
- error_message: Custom error message (optional)
- class: Additional CSS classes (optional)
- id: Custom element ID (optional)
- autocomplete: Autocomplete attribute (optional)
- maxlength: Maximum length (optional)
- minlength: Minimum length (optional)
- pattern: Regex pattern (optional)
{% endcomment %}

<div class="mb-4">
    {% if label or field.label %}
        <label for="{% if id %}{{ id }}{% else %}{{ field.id_for_label }}{% endif %}" 
               class="block text-sm font-medium text-gray-700 mb-1">
            {% if label %}{{ label }}{% else %}{{ field.label }}{% endif %}
            {% if required %}<span class="text-red-500 ml-1">*</span>{% endif %}
        </label>
    {% endif %}
    
    {% if field.field.widget.input_type == 'textarea' %}
        <textarea name="{{ field.name }}" 
                  id="{% if id %}{{ id }}{% else %}{{ field.id_for_label }}{% endif %}"
                  class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200
                         {% if field.errors %}border-red-500 focus:ring-red-500 focus:border-red-500{% endif %}
                         {{ class }}"
                  {% if placeholder %}placeholder="{{ placeholder }}"{% endif %}
                  {% if required %}required{% endif %}
                  {% if autocomplete %}autocomplete="{{ autocomplete }}"{% endif %}
                  {% if maxlength %}maxlength="{{ maxlength }}"{% endif %}
                  {% if minlength %}minlength="{{ minlength }}"{% endif %}
                  {% if pattern %}pattern="{{ pattern }}"{% endif %}>{{ field.value|default:'' }}</textarea>
    {% elif field.field.widget.input_type == 'select' %}
        <select name="{{ field.name }}" 
                id="{% if id %}{{ id }}{% else %}{{ field.id_for_label }}{% endif %}"
                class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200
                       {% if field.errors %}border-red-500 focus:ring-red-500 focus:border-red-500{% endif %}
                       {{ class }}"
                {% if required %}required{% endif %}>
            {% for choice in field.field.choices %}
                <option value="{{ choice.0 }}" {% if field.value == choice.0 %}selected{% endif %}>{{ choice.1 }}</option>
            {% endfor %}
        </select>
    {% elif field.field.widget.input_type == 'checkbox' %}
        <div class="flex items-center">
            <input type="checkbox" 
                   name="{{ field.name }}" 
                   id="{% if id %}{{ id }}{% else %}{{ field.id_for_label }}{% endif %}"
                   class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded
                          {% if field.errors %}border-red-500 focus:ring-red-500{% endif %}
                          {{ class }}"
                   {% if field.checked %}checked{% endif %}
                   {% if required %}required{% endif %}
                   {% if autocomplete %}autocomplete="{{ autocomplete }}"{% endif %}>
            {% if label or field.label %}
                <label for="{% if id %}{{ id }}{% else %}{{ field.id_for_label }}{% endif %}" 
                       class="ml-2 block text-sm text-gray-900">
                    {% if label %}{{ label }}{% else %}{{ field.label }}{% endif %}
                    {% if required %}<span class="text-red-500 ml-1">*</span>{% endif %}
                </label>
            {% endif %}
        </div>
    {% else %}
        <input type="{% if type %}{{ type }}{% else %}{{ field.field.widget.input_type }}{% endif %}" 
               name="{{ field.name }}" 
               id="{% if id %}{{ id }}{% else %}{{ field.id_for_label }}{% endif %}"
               value="{{ field.value|default:'' }}"
               class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200
                      {% if field.errors %}border-red-500 focus:ring-red-500 focus:border-red-500{% endif %}
                      {{ class }}"
               {% if placeholder %}placeholder="{{ placeholder }}"{% endif %}
               {% if required %}required{% endif %}
               {% if autocomplete %}autocomplete="{{ autocomplete }}"{% endif %}
               {% if maxlength %}maxlength="{{ maxlength }}"{% endif %}
               {% if minlength %}minlength="{{ minlength }}"{% endif %}
               {% if pattern %}pattern="{{ pattern }}"{% endif %}>
    {% endif %}
    
    {% if help_text %}
        <p class="mt-1 text-sm text-gray-500">{{ help_text }}</p>
    {% endif %}
    
    {% if field.errors %}
        {% for error in field.errors %}
            <p class="mt-1 text-sm text-red-600">{{ error|default:error_message }}</p>
        {% endfor %}
    {% elif error_message %}
        <p class="mt-1 text-sm text-red-600">{{ error_message }}</p>
    {% endif %}
</div>